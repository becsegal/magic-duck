"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extensionsPattern = exports.explicitRelative = void 0;
const path_1 = require("path");
// by "explicit", I mean that we want "./local/thing" instead of "local/thing"
// because
//     import "./local/thing"
// has a different meaning than
//     import "local/thing"
//
function explicitRelative(fromDir, toFile) {
    let result = (0, path_1.join)((0, path_1.relative)(fromDir, (0, path_1.dirname)(toFile)), (0, path_1.basename)(toFile));
    if (!(0, path_1.isAbsolute)(result) && !result.startsWith('.')) {
        result = './' + result;
    }
    if ((0, path_1.isAbsolute)(toFile) && result.endsWith(toFile)) {
        // this prevents silly "relative" paths like
        // "../../../../../Users/you/projects/your/stuff" when we could have just
        // said "/Users/you/projects/your/stuff". The silly path isn't incorrect,
        // but it's unnecessarily verbose.
        return toFile;
    }
    // windows supports both "./" and ".\", but webpack 5 insists on "./"
    if (result.startsWith('.\\')) {
        return './' + result.slice(2);
    }
    // windows supports both "../" and "..\", but webpack 5 insists on "../"
    if (result.startsWith('..\\')) {
        return '../' + result.slice(3);
    }
    return result;
}
exports.explicitRelative = explicitRelative;
// given a list like ['.js', '.ts'], return a regular expression for files ending
// in those extensions.
function extensionsPattern(extensions) {
    return new RegExp(`(${extensions.map(e => `${e.replace('.', '\\.')}`).join('|')})$`, 'i');
}
exports.extensionsPattern = extensionsPattern;
//# sourceMappingURL=paths.js.map